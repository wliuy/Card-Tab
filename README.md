# Card-Tab - åŠŸèƒ½å¼ºå¤§çš„å¡ç‰‡å¼å¯¼èˆª

è¿™æ˜¯ä¸€ä¸ªç¾è§‚ã€ç°ä»£åŒ–çš„ä¹¦ç­¾å¯¼èˆªé¡¹ç›®ã€‚å®ƒé‡‡ç”¨å¡ç‰‡å¼å¸ƒå±€ï¼Œæ”¯æŒæš—è‰²ä¸»é¢˜ã€æ‹–æ‹½æ’åºã€ç§å¯†ä¹¦ç­¾ï¼Œå¹¶æ‹¥æœ‰å¼ºå¤§çš„åˆ†ç±»ç®¡ç†å’Œäº‘ç«¯å¤‡ä»½æ¢å¤åŠŸèƒ½ã€‚

æœ¬é¡¹ç›®åŸºäº Cloudflare Workers å’Œ KV å­˜å‚¨ï¼Œéƒ¨ç½²ç®€å•ï¼Œå“åº”è¿…é€Ÿï¼Œå®ç°äº†çœŸæ­£çš„â€œä¸€é”®éƒ¨ç½²â€ã€‚

æ‚¨å½“å‰æŸ¥çœ‹çš„æ˜¯ **wliuy** çš„ä¸ªäººä¿®æ”¹ç‰ˆï¼ŒåŸºäº [hmhm2022/Card-Tab](https://github.com/hmhm2022/Card-Tab) é¡¹ç›®è¿›è¡Œäº†åŠŸèƒ½å¢å¼ºå’Œæµç¨‹ä¼˜åŒ–ã€‚

![1745910265848](https://github.com/user-attachments/assets/bce632fc-d61c-4efe-a74e-e416cab085b8)

### âœ¨ æ ¸å¿ƒåŠŸèƒ½

#### ğŸ¨ ç•Œé¢ä¸ä½“éªŒ
* **ç°ä»£åŒ–è®¾è®¡**ï¼šä¼˜é›…çš„å¡ç‰‡å¼å¸ƒå±€ï¼Œæ”¯æŒäº®è‰²/æš—è‰²åŒä¸»é¢˜ï¼Œå¹¶èƒ½è®°å¿†æ‚¨çš„é€‰æ‹©ã€‚
* **å“åº”å¼å¸ƒå±€**ï¼šå®Œç¾é€‚é…æ¡Œé¢ã€å¹³æ¿å’Œç§»åŠ¨è®¾å¤‡ã€‚
* **æµç•…äº¤äº’**ï¼šæ‹¥æœ‰åŠ è½½åŠ¨ç”»ã€æ‚¬åœæç¤ºã€ä¸€é”®è¿”å›é¡¶éƒ¨ç­‰ç»†èŠ‚ä¼˜åŒ–ã€‚
* **ä¸ªæ€§åŒ–å›¾æ ‡**ï¼šæ”¯æŒè‡ªå®šä¹‰å›¾æ ‡URLï¼Œæˆ–è‡ªåŠ¨ä»ç½‘ç«™æŠ“å– Faviconã€‚

#### ğŸ” æœç´¢åŠŸèƒ½
* **å¤šå¼•æ“åˆ‡æ¢**ï¼šå†…ç½® SearXNGã€ç™¾åº¦ã€è°·æ­Œã€å¿…åº”ç­‰å¤šä¸ªæœç´¢å¼•æ“ï¼Œå¹¶èƒ½è®°ä½æ‚¨çš„é»˜è®¤é€‰æ‹©ã€‚
* **å®æ—¶ä¹¦ç­¾æœç´¢**ï¼šåœ¨å¯¼èˆªå†…å³æ—¶æœç´¢å·²ä¿å­˜çš„ä¹¦ç­¾ï¼Œå¿«é€Ÿå®šä½ã€‚
* **åˆ†ç±»å¿«æ·å¯¼èˆª**ï¼šé¡¶éƒ¨åˆ†ç±»æŒ‰é’®å¯å¿«é€Ÿè·³è½¬åˆ°æŒ‡å®šåŒºåŸŸï¼Œå¹¶é«˜äº®æ˜¾ç¤ºå½“å‰åˆ†ç±»ã€‚

#### ğŸ“š å¼ºå¤§çš„ä¹¦ç­¾ç®¡ç†
* **æ‹–æ‹½æ’åº**ï¼šåœ¨â€œè®¾ç½®â€æ¨¡å¼ä¸‹ï¼Œé€šè¿‡æ‹–æ‹½ç›´è§‚åœ°è°ƒæ•´ä¹¦ç­¾é¡ºåºã€‚
* **å®Œæ•´åˆ†ç±»ç®¡ç†**ï¼š
    * **å¢åˆ æ”¹æŸ¥**ï¼šè½»æ¾æ·»åŠ ã€åˆ é™¤ã€é‡å‘½ååˆ†ç±»ã€‚
    * **è‡ªç”±æ’åº**ï¼šé€šè¿‡ä¸Šä¸‹ç®­å¤´è°ƒæ•´åˆ†ç±»çš„æ˜¾ç¤ºé¡ºåºã€‚
* **ç§å¯†ä¹¦ç­¾**ï¼šæ”¯æŒè®¾ç½®ç™»å½•åæ‰å¯è§çš„ç§å¯†ä¹¦ç­¾ï¼Œä¿æŠ¤ä¸ªäººéšç§ã€‚
* **ä¾¿æ·ç¼–è¾‘**ï¼šè¿›å…¥è®¾ç½®æ¨¡å¼åï¼Œé¼ æ ‡æ‚¬æµ®åœ¨å¡ç‰‡ä¸Šå³å¯å¿«é€Ÿç¼–è¾‘æˆ–åˆ é™¤ã€‚

#### ğŸ” æ•°æ®å®‰å…¨ä¸å¤‡ä»½
* **å®‰å…¨ç™»å½•**ï¼šåŸºäº JWT çš„èº«ä»½éªŒè¯æœºåˆ¶ï¼ŒToken è‡ªåŠ¨è¿‡æœŸã€‚
* **è‡ªåŠ¨äº‘ç«¯å¤‡ä»½**ï¼š
    * **è¿›å…¥è®¾ç½®æ—¶è‡ªåŠ¨å¤‡ä»½**ï¼šæ¯æ¬¡è¿›å…¥â€œè®¾ç½®â€æ¨¡å¼å‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä»½å½“å‰æ•°æ®çš„å¿«ç…§ã€‚
    * **ç¦»å¼€è®¾ç½®æ—¶å®‰å…¨é€€å‡º**ï¼šé€€å‡ºè®¾ç½®æ—¶ï¼Œæ‚¨å¯ä»¥é€‰æ‹©**ä¿å­˜ä¿®æ”¹**æˆ–**ä¸€é”®æ’¤é”€**ï¼ˆä»è¿›å…¥å‰çš„å¤‡ä»½æ¢å¤ï¼‰ï¼Œé˜²æ­¢è¯¯æ“ä½œã€‚
* **æ‰‹åŠ¨å¤‡ä»½ä¸æ¢å¤**ï¼š
    * æä¾›**å¤‡ä»½ç®¡ç†é¢æ¿**ï¼Œå¯æŸ¥çœ‹å¤šè¾¾10ä¸ªå†å²å¤‡ä»½èŠ‚ç‚¹ã€‚
    * æ”¯æŒ**æ‰‹åŠ¨åˆ›å»º**æ–°çš„å¤‡ä»½ã€‚
    * æ”¯æŒä»**ä»»æ„å†å²èŠ‚ç‚¹**æ¢å¤æ•°æ®ã€‚
* **å¯¼å…¥/å¯¼å‡º**ï¼šæ”¯æŒå°†æ‰€æœ‰ä¹¦ç­¾æ•°æ®å¯¼å‡ºä¸º `.json` æ–‡ä»¶ï¼Œæˆ–ä»æ–‡ä»¶ä¸­å¯¼å…¥ã€‚

---

## ğŸš€ ä¸€é”®éƒ¨ç½²æŒ‡å— (æ¨è)

æˆ‘ä»¬ä½¿ç”¨ Cloudflare å®˜æ–¹å‘½ä»¤è¡Œå·¥å…· `Wrangler`ï¼ŒæŠ›å¼ƒç¹ççš„ç½‘é¡µæ‰‹åŠ¨æ“ä½œï¼Œåªéœ€ä¸¤æ­¥å³å¯å®Œæˆæ‰€æœ‰é…ç½®å’Œéƒ¨ç½²ã€‚

### ç¬¬ 1 æ­¥ï¼šå‡†å¤‡å·¥ä½œ

1.  **å…‹éš†æœ¬é¡¹ç›®åˆ°æœ¬åœ°**
    ```bash
    git clone [https://github.com/wliuy/Card-Tab.git](https://github.com/wliuy/Card-Tab.git)
    cd Card-Tab
    ```

2.  **å®‰è£… Wrangler CLI**
    *(éœ€è¦ç”µè„‘ä¸Šå·²å®‰è£… [Node.js](https://nodejs.org/) >= 16.17.0)*
    ```bash
    npm install -g wrangler
    ```

3.  **ç™»å½• Cloudflare è´¦æˆ·**
    æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€æˆæƒé¡µé¢ï¼Œç‚¹å‡»å…è®¸å³å¯ã€‚
    ```bash
    wrangler login
    ```

4.  **ä¿®æ”¹é…ç½®æ–‡ä»¶ `wrangler.toml`**
    æ‰“å¼€é¡¹ç›®ä¸­çš„ `wrangler.toml` æ–‡ä»¶ï¼Œ**æ‚¨åªéœ€è¦ä¿®æ”¹ä¸¤ä¸ªåœ°æ–¹**ï¼š
    * `account_id`: æ›¿æ¢æˆæ‚¨è‡ªå·±çš„ Cloudflare è´¦æˆ· IDã€‚
        * *(è·å–æ–¹æ³•ï¼šç™»å½• Cloudflare -> åœ¨é¦–é¡µå³ä¾§å³å¯æ‰¾åˆ°â€œè´¦æˆ· IDâ€)*
    * `ADMIN_PASSWORD`: åœ¨ `[vars]` éƒ¨åˆ†ï¼Œå°† `"your_password_here"` æ›¿æ¢æˆæ‚¨æƒ³è®¾ç½®çš„åå°ç®¡ç†å¯†ç ã€‚

    **è¯·å°†ä»¥ä¸‹å†…å®¹ä¿å­˜ä¸º `wrangler.toml` æ–‡ä»¶ï¼Œå¹¶æ”¾åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼š**
    ```toml
    # wrangler.toml
    name = "card-tab" # æ‚¨å¯ä»¥è‡ªå®šä¹‰Workerçš„åç§°
    main = "workers.js" # æŒ‡å®šå…¥å£æ–‡ä»¶
    compatibility_date = "2024-04-05"
    
    # â—ï¸â—ï¸*** è¯·æ›¿æ¢æˆä½ è‡ªå·±çš„ Account ID ***â—ï¸â—ï¸
    account_id = "YOUR_ACCOUNT_ID_HERE" 
    
    # å®šä¹‰KVå­˜å‚¨ï¼ŒWranglerä¼šè‡ªåŠ¨åˆ›å»ºå¹¶ç»‘å®š
    kv_namespaces = [
      { binding = "CARD_ORDER", id = "", preview_id = "" }
    ]
    
    [vars]
    # â—ï¸â—ï¸*** åœ¨è¿™é‡Œè®¾ç½®ä½ çš„åå°ç®¡ç†å¯†ç  ***â—ï¸â—ï¸
    ADMIN_PASSWORD = "your_password_here" 
    ```

### ç¬¬ 2 æ­¥ï¼šæ‰§è¡Œéƒ¨ç½²

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼ˆå³ `wrangler.toml` æ‰€åœ¨çš„ç›®å½•ï¼‰ï¼Œè¿è¡Œä¸€ä¸ªå‘½ä»¤ï¼š

```bash
wrangler deploy



# éƒ¨ç½²æ–¹æ³•ï¼š
#### äº”æ­¥å³å¯å®Œæˆéƒ¨ç½²ï¼š
#### 1. ç™»å½• Cloudflareï¼š  https://www.cloudflare.com  åˆ›å»ºworkersï¼Œå¤åˆ¶ workers.js çš„ä»£ç ï¼Œç„¶åéƒ¨ç½²
![image](https://github.com/user-attachments/assets/c067105b-91ee-43d5-90a9-806e5de5fe16)

#### 2. æ–°å»ºä¸€ä¸ªåä¸ºCARD_ORDERçš„KVå­˜å‚¨
![image](https://github.com/user-attachments/assets/706a7735-b47a-4f66-bdb4-827c38be692b)

#### 3. æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œç”¨äºè®¾ç½®åå°ç®¡ç†å¯†ç ã€‚å˜é‡åä¸ºADMIN_PASSWORDï¼Œå€¼your_passwordæ¢æˆä½ è‡ªå·±çš„å¯†ç 
![image](https://github.com/user-attachments/assets/532dcb8f-dc30-4ca9-aac9-21ef546bf367)

#### 4. å°†workersçš„CARD_ORDERå˜é‡ä¸æ–°å»ºçš„KVå­˜å‚¨ç»‘å®šï¼Œç”¨äºå­˜å‚¨ä¹¦ç­¾
![image](https://github.com/user-attachments/assets/9b166809-5b1e-451e-be99-253f6e60be54)

#### 5. æ·»åŠ åŸŸå
![image](https://github.com/user-attachments/assets/4f23eab6-e94c-49b1-9198-3c8e05dffa8a)

## æ­¤é¡¹ç›®é€‚åˆè½»é‡ä½¿ç”¨ï¼Œå„ä½éšæ„è‡ªè¡Œé­”æ”¹ï¼Œå–œæ¬¢çš„è¯ç‚¹ä¸€ä¸‹å°æ˜Ÿæ˜Ÿå°±è¡Œï¼Œè°¢è°¢ï¼
